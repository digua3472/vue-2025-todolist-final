import{r as n,a as h,c as r,o as i,b as e,d as C,w as p,e as d,v as u,f as c,t as f,g as _,u as x}from"./index-CaRS22tC.js";import{L as P,a as U}from"./LoadingOverlay-C-S3pjov.js";import{v as V}from"./validate-BA5-fWI4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E={id:"signUpPage",class:"bg-yellow"},K={class:"container signUpPage vhContainer"},S={class:"formControls",action:"index.html"},B={key:0},D={key:1},L={key:2},N={key:3},I="https://todolist-api.hexschool.io",T={__name:"RegisterView",setup(M){const b=x(),w=n(""),g=n(""),m=n(""),v=n(""),y=n(!1),o=h({email:"",nickname:"",password:"",comfirmPassword:""}),k={email:{presence:{allowEmpty:!1,message:"^此欄位不可留空"},email:{message:"^必須是正確的 Email 格式"}},nickname:{presence:{allowEmpty:!1,message:"^此欄位不可留空"}},password:{presence:{allowEmpty:!1,message:"^此欄位不可留空"},length:{minimum:6,message:"^密碼至少需要 6 碼"}},comfirmPassword:{presence:{allowEmpty:!1,message:"^此欄位不可留空"},equality:{attribute:"password",message:"^兩次輸入的密碼不一致",comparator:function(l){return l===m.value}}}},t=async()=>{const l={email:w.value,nickname:g.value,password:m.value,comfirmPassword:v.value},s=V(l,k);if(s){o.email=s.email?s.email[0]:"",o.nickname=s.nickname?s.nickname[0]:"",o.password=s.password?s.password[0]:"",o.comfirmPassword=s.comfirmPassword?s.comfirmPassword[0]:"";return}try{y.value=!0;const a=await U.post(`${I}/users/sign_up`,l);console.log(a),alert("註冊成功"),b.push("login")}catch(a){alert(`註冊失敗： ${a.response.data.message}`)}finally{y.value=!1}};return(l,s)=>(i(),r("div",E,[e("div",K,[s[10]||(s[10]=e("div",{class:"side"},[e("a",{href:"#"},[e("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),e("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),e("div",null,[e("form",S,[s[4]||(s[4]=e("h2",{class:"formControls_txt"},"註冊帳號",-1)),s[5]||(s[5]=e("label",{class:"formControls_label",for:"email"},"Email",-1)),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>w.value=a),onKeyup:c(t,["enter"]),class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email"},null,544),[[u,w.value]]),o.email?(i(),r("span",B,f(o.email),1)):d("",!0),s[6]||(s[6]=e("label",{class:"formControls_label",for:"name"},"您的暱稱",-1)),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>g.value=a),onKeyup:c(t,["enter"]),class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱"},null,544),[[u,g.value]]),o.nickname?(i(),r("span",D,f(o.nickname),1)):d("",!0),s[7]||(s[7]=e("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),p(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>m.value=a),onKeyup:c(t,["enter"]),class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼"},null,544),[[u,m.value]]),o.password?(i(),r("span",L,f(o.password),1)):d("",!0),s[8]||(s[8]=e("label",{class:"formControls_label",for:"pwd"},"再次輸入密碼",-1)),p(e("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>v.value=a),onKeyup:c(t,["enter"]),class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請再次輸入密碼"},null,544),[[u,v.value]]),o.comfirmPassword?(i(),r("span",N,f(o.comfirmPassword),1)):d("",!0),e("input",{onClick:_(t,["prevent"]),class:"formControls_btnSubmit",type:"button",value:"註冊帳號"}),s[9]||(s[9]=e("a",{class:"formControls_btnLink",href:"#login"},"登入",-1))])])]),C(P,{show:y.value},null,8,["show"])]))}};export{T as default};
